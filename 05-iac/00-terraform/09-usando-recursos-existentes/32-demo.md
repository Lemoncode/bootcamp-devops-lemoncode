# Reviewing the Example Network Configuration

You set the standard for using Terraform at Globomantics. In particular, you chose to use the VPC module from the public Terraform registry. So ideally, you'd like to import the resources created by the CloudFormation template into the VPC module. Any resources not in the VPC module can be dynamically generated by Terraform. In the network_config_example directory, we have a basic configuration that uses the VPC module. 

Before we make any changes, let's make a copy of the network_config_example directory in the root of the exercise files. We'll start by moving up to the root directory. And then depending if you're using PowerShell or BASH, run the appropriate command. This will copy the network_config_example into a directory called network_config. 

```bash
cp -r network_config_start/ .lab/network_config
```

Now that we have our copy, we can make changes and updates to it. Let's scroll down and expand the `network_config` directory, and we'll take a look first at the input variables. Now I'll hide the TERMINAL to give us a little more room. 

```ini
##################################################################################
# VARIABLES
##################################################################################

variable "region" {
  type        = string
  description = "(Optional) AWS Region to use. Default: us-east-1"
  default     = "eu-west-3"
}

variable "prefix" {
  type        = string
  description = "(Optional) Prefix to use for all resources in this module. Default: lc-dev"
  default     = "lc-dev"
}

variable "cidr_block" {
  type        = string
  description = "(Optional) The CIDR block for the VPC. Default:10.42.0.0/16"
  default     = "10.42.0.0/16"
}

variable "public_subnets" {
  type        = map(string)
  description = "(Optional) Map of public subnets to create with CIDR blocks. Key will be used as subnet name with prefix. Default: {subnet-1 ="
  default = {
    public-1 = "10.42.10.0/24"
    public-2 = "10.42.11.0/24"
  }
}

```

Inspecting the variables first, we have our region set to a default of eu-west-3, a prefix used for naming of lc‑dev, a cidr_block for the VPC that's set to a default of 10.42.0.0/16, and a public_subnets map that uses a default that defines two public subnets, public‑1 and public‑2, using the IP address ranges that we saw in the CloudFormation template. 

If you chose to override any of the parameters in the CloudFormation template, you'll need to supply similar values for these input variables. 

In the `resources.tf` file, we have a provider block for AWS and a data source to query the list of availability zones. 

```ini
##################################################################################
# PROVIDERS
##################################################################################

provider "aws" {
  region = var.region
}

##################################################################################
# DATA
##################################################################################

data "aws_availability_zones" "available" {}

```

There's a local value for `common_tags` that we can use to add common tags to all of our resources, 

```ini
##################################################################################
# RESOURCES
##################################################################################
locals {
  common_tags = {
    
  }
}

```

and then we have a module block that uses the VPC module from the public registry. 

```ini
module "main" {
  source  = "terraform-aws-modules/vpc/aws"
  version = "5.0.0"

  name = var.prefix
  cidr = var.cidr_block

  azs                     = slice(data.aws_availability_zones.available.names, 0, length(var.public_subnets))
  public_subnets          = [for k, v in var.public_subnets : v]
  public_subnet_names     = [for k, v in var.public_subnets : "${var.prefix}-${k}"]
  enable_dns_hostnames    = true
  public_subnet_suffix    = ""
  public_route_table_tags = { Name = "${var.prefix}-public" }
  map_public_ip_on_launch = true

  enable_nat_gateway = false

  tags = local.common_tags
}
```

I filled out the necessary arguments for the module to match what's been deployed with the CloudFormation template. Ideally, the availability zones will match up, but I can't 100% guarantee that they will with your deployment, so you may end up hard coding them to match what's in your environment.
